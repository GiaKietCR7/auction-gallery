<%- include('partials/head', { title: 'Gallery' }) %>

<div class="flex items-center justify-between mb-6">
  <h1 class="font-serif text-3xl">Gallery</h1>
  <form class="flex gap-2" method="GET" action="/">
    <input type="text" name="q" value="<%= q || '' %>" placeholder="Tìm theo tiêu đề, mô tả…"
           class="border rounded-full px-4 py-2 text-[14px] w-64" />
    <button class="bg-ink text-white px-4 py-2 rounded-full text-[14px]">Tìm</button>
  </form>
</div>

<% if (!items || !items.length) { %>
  <div class="text-ink/60">Chưa có tác phẩm nào. Vào <a class="link" href="/admin/upload?key=<%= encodeURIComponent(process.env.ADMIN_KEY || '') %>">đăng tác phẩm</a>.</div>
<% } else { %>
  <div class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
    <% items.forEach(function(it){ %>
      <a href="/item/<%= it.id %>" class="block group">
        <div class="aspect-[4/3] overflow-hidden rounded-2xl shadow-card">
          <img src="<%= it.image_path %>" alt="<%= it.title %>" class="w-full h-full object-cover group-hover:scale-[1.02] transition" />
        </div>
        <div class="mt-2">
          <div class="font-medium"><%= it.title %></div>
          <div class="text-[13px] text-ink/60">
            Giá hiện tại:
            $<%= (it.topBid ?? it.start_price).toFixed(2) %>
            · Lượt đặt giá: <%= it.bidCount %>
            <% if (it.ended) { %>
              · <span class="text-red-600">Đã kết thúc</span>
            <% } %>
          </div>
        </div>
      </a>
    <% }) %>
  </div>
<% } %>

<%- include('partials/foot') %>
